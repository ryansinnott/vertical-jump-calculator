<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0a0a0f">
    <meta name="description" content="Measure your vertical jump height from video using physics">
    <title>Vertical Jump Calculator</title>

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icons/icon-512.png">
    <link rel="apple-touch-icon" href="icons/icon-192.png">

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Screen 1: Welcome -->
        <div id="screen-welcome" class="screen active">
            <div class="screen-content">
                <div class="logo">
                    <div class="logo-icon">
                        <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M32 8L32 56M32 8L20 20M32 8L44 20" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                            <circle cx="32" cy="44" r="6" fill="currentColor"/>
                        </svg>
                    </div>
                    <h1>Vertical Jump</h1>
                    <p class="subtitle">Measure your jump height from video</p>
                </div>

                <div class="features">
                    <div class="feature">
                        <span class="feature-icon">1</span>
                        <span>Upload your jump video</span>
                    </div>
                    <div class="feature">
                        <span class="feature-icon">2</span>
                        <span>Mark takeoff & peak frames</span>
                    </div>
                    <div class="feature">
                        <span class="feature-icon">3</span>
                        <span>Get your jump height</span>
                    </div>
                </div>

                <button id="btn-start" class="btn btn-primary">Get Started</button>
            </div>
        </div>

        <!-- Screen 2: Upload -->
        <div id="screen-upload" class="screen">
            <div class="screen-content">
                <h2>Upload Your Video</h2>
                <p class="screen-subtitle">Record yourself jumping from the side for best results</p>

                <div class="upload-area" id="upload-area">
                    <div class="upload-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="17 8 12 3 7 8"/>
                            <line x1="12" y1="3" x2="12" y2="15"/>
                        </svg>
                    </div>
                    <p>Tap to select video</p>
                    <span class="upload-hint">or drag and drop</span>
                </div>

                <input type="file" id="video-upload" accept="video/*" hidden>

                <div class="tips">
                    <h4>Tips for best results:</h4>
                    <ul>
                        <li>Film from either side</li>
                        <li>Keep camera steady</li>
                        <li>Show feet clearly</li>
                        <li>Use slow-motion if available</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Screen 3: Frame Selector -->
        <div id="screen-selector" class="screen">
            <div class="selector-container">
                <div class="video-wrapper">
                    <video id="video-player" playsinline></video>
                    <div id="frame-indicator" class="frame-indicator"></div>
                </div>

                <div class="selector-controls">
                    <div class="time-display">
                        <span id="current-time">0.000</span>s
                    </div>

                    <div class="scrubber-container">
                        <input type="range" id="video-scrubber" min="0" max="1000" value="0" step="1">
                        <div id="takeoff-marker" class="frame-marker takeoff hidden"></div>
                        <div id="peak-marker" class="frame-marker peak hidden"></div>
                    </div>

                    <div class="frame-buttons">
                        <button id="btn-prev-frame" class="btn-frame">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
                            </svg>
                        </button>
                        <button id="btn-play-pause" class="btn-frame btn-play">
                            <svg class="icon-play" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                            <svg class="icon-pause hidden" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                            </svg>
                        </button>
                        <button id="btn-next-frame" class="btn-frame">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/>
                            </svg>
                        </button>
                    </div>

                    <div class="mark-buttons">
                        <button id="btn-mark-takeoff" class="btn btn-mark takeoff">
                            <span class="mark-dot"></span>
                            Mark Takeoff
                        </button>
                        <button id="btn-mark-peak" class="btn btn-mark peak">
                            <span class="mark-dot"></span>
                            Mark Peak
                        </button>
                    </div>

                    <div class="marked-times">
                        <div class="marked-time" id="takeoff-time-display">
                            <span class="mark-label">Takeoff:</span>
                            <span class="mark-value" id="takeoff-time-value">Not set</span>
                        </div>
                        <div class="marked-time" id="peak-time-display">
                            <span class="mark-label">Peak:</span>
                            <span class="mark-value" id="peak-time-value">Not set</span>
                        </div>
                    </div>

                    <div class="instruction-text" id="instruction-text">
                        Scrub to the frame where your heels leave the ground, then tap "Mark Takeoff"
                    </div>

                    <button id="btn-calculate" class="btn btn-primary" disabled>Calculate Jump Height</button>
                </div>
            </div>
        </div>

        <!-- Screen 4: Results -->
        <div id="screen-results" class="screen">
            <div class="screen-content centered">
                <div class="result-card">
                    <div class="result-label">Your Vertical Jump</div>
                    <div class="result-height">
                        <span id="result-cm" class="result-number">0</span>
                        <span class="result-unit">cm</span>
                    </div>
                    <div class="result-height-alt">
                        <span id="result-inches">0</span> inches
                    </div>

                    <div id="result-category" class="result-category" data-category="average">
                        <span class="category-badge">Average</span>
                    </div>

                    <p id="result-context" class="result-context">
                        That's about average for the general population.
                    </p>

                    <div class="result-details">
                        <div class="detail">
                            <span class="detail-label">Air time to peak</span>
                            <span class="detail-value" id="result-airtime">0.00s</span>
                        </div>
                    </div>
                </div>

                <button id="btn-try-again" class="btn btn-primary">Try Again</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('SW registered:', registration.scope);
                    })
                    .catch(error => {
                        console.log('SW registration failed:', error);
                    });
            });
        }
    </script>
</body>
</html>
